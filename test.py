import pandas as pd
import numpy as np
import matplotlib.pyplot as plt
from sklearn.metrics import roc_curve, auc


def plot_roc(csv):
    df = pd.read_csv(csv)
    scores = np.array(df)[:, 0]
    labels = np.array(df)[:, 1]

    # Compute ROC curve and area the curve
    fpr, tpr, thresholds = roc_curve(labels, scores, pos_label=0)
    roc_auc = auc(fpr, tpr)

    # Plot ROC curve
    plt.clf()
    plt.plot(fpr, tpr, label="ROC curve (area = %0.2f)" % roc_auc)
    plt.plot([0, 1], [0, 1], "k--")
    plt.xlim([0.0, 1.0])
    plt.ylim([0.0, 1.0])
    plt.xlabel("False Positive Rate")
    plt.ylabel("True Positive Rate")
    plt.title(csv)
    plt.legend(loc="lower right")
    plt.show()


import os

# Assuming all your CSV files are in a directory named 'csv_files'
directory_path = "./output/testingResults/winwebsec/winwebsecVSzbot/"

# Iterate over all files in the directory
for filename in os.listdir(directory_path):
    if filename.endswith(".csv"):
        csv_file_path = os.path.join(directory_path, filename)
        plot_roc(csv_file_path)
